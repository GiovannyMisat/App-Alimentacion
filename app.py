# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Ma9SMqa3zKyQE9kidq2qBaO4ZduQIKKL
"""

import streamlit as st
import pandas as pd
import random

# Configuraci√≥n de la p√°gina
st.set_page_config(page_title="Men√∫ Familiar Quitian", layout="wide")

st.title("ü•ë Planificador de Men√∫s - Familia Quitian")
st.write("Planificaci√≥n para: 2 Adultos, Ni√±o (2 a√±os), Beb√© (6 meses)")

# 1. Cargar Datos (Simulando la carga de tu archivo)
# En tu caso real usar√°s: df = pd.read_excel("ALIMENTACION.xlsx")
# Aqu√≠ creo un dataframe con tus datos de muestra para que el c√≥digo sea ejecutable ya mismo.
data = {
    'VERDURA': ['AGUACATE', 'BROCOLI COCIDO', 'REMOLACHA', 'ZANAHORIA', 'TOMATE', 'COLIFLOR COCIDO', 'ENSALADA MIXTA'],
    'PROTEINA': ['PECHUGA DESMECHADA', 'HUEVO COCIDO', 'CARNE MOLIDA', 'PESCADO', 'CERDO ASADO', 'ALBONDIGAS', 'HAMBURGUESAS'],
    'CARBOHIDRATOS': ['PAPA COCIDA', 'ARROZ', 'PASTAS', 'PLATANO AMARILLO', 'AREPA DE YUCA', 'PAPA CRIOLLA', 'PATACONES'],
    'NI√ëOS_RECETAS': ['PANCAKES DE MANZANA', 'TORTILLA DE PAPA', 'PURE DE MANZANA', 'MUFFINS DE ARANDANO', 'MONEDITAS DE PAPA', 'HELADO DE KIWI', 'NUGGETS DE QUINUA'],
    'FRUTA': ['PAPAYA', 'BANANO', 'MANDARINA', 'MANZANA', 'PERA', 'KIWI', 'FRESAS']
}

# Normalizar longitudes para el dataframe de ejemplo
max_len = max(len(v) for v in data.values())
for k in data:
    data[k] += [None] * (max_len - len(data[k]))

df = pd.DataFrame(data)

# 2. L√≥gica de Generaci√≥n
def generar_menu():
    dias = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo']
    menu = []

    # Limpiar NaNs
    proteinas = df['PROTEINA'].dropna().tolist()
    carbos = df['CARBOHIDRATOS'].dropna().tolist()
    verduras = df['VERDURA'].dropna().tolist()
    ninos = df['NI√ëOS_RECETAS'].dropna().tolist()
    frutas = df['FRUTA'].dropna().tolist()

    for dia in dias:
        row = {
            'D√≠a': dia,
            'Prote√≠na': random.choice(proteinas),
            'Carbohidrato': random.choice(carbos),
            'Verdura': random.choice(verduras),
            'Lonchera/Ni√±o': random.choice(ninos),
            'Fruta/Postre': random.choice(frutas),
            'Tip Beb√© 6m': 'Ofrecer ingrediente aislado: ' + random.choice([random.choice(verduras), random.choice(frutas)])
        }
        menu.append(row)

    return pd.DataFrame(menu)

# 3. Interfaz de Usuario
if st.button('üîÑ Generar Nuevo Men√∫ Semanal'):
    menu_semanal = generar_menu()
    st.session_state['menu'] = menu_semanal

if 'menu' in st.session_state:
    st.dataframe(st.session_state['menu'], use_container_width=True)

    st.subheader("üìù Lista de Compras Sugerida")
    col1, col2 = st.columns(2)
    with col1:
        st.write("**Prote√≠nas:**")
        st.write(", ".join(set(st.session_state['menu']['Prote√≠na'])))
    with col2:
        st.write("**Verduras y Frutas:**")
        st.write(", ".join(set(st.session_state['menu']['Verdura']).union(set(st.session_state['menu']['Fruta/Postre']))))

else:
    st.info("Haz clic en el bot√≥n para generar tu primer men√∫.")

st.markdown("---")
st.caption("Nota: Para el beb√© de 6 meses, recuerda ofrecer los alimentos sin sal, sin az√∫car y en texturas seguras (BLW o Papilla).")